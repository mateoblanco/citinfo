(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{43:function(e,t,a){e.exports=a(88)},48:function(e,t,a){},88:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),o=a.n(c),s=(a(48),a(2)),i=a(3),l=a(5),u=a(4),p=a(6),m=a(9),h=a.n(m),f=a(13),d=a(90),y=a(92),v=a(91),b=a(14),E=a.n(b),C=a(89),g=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).liStyle=function(){return a.props.informacion.images[0]?{backgroundImage:"url("+a.props.informacion.images[0].sizes.medium.url+")"}:{background:"#CCC"}},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("li",{style:this.liStyle()},r.a.createElement(C.a,{to:"/city/".concat(this.props.informacion.country_id,"/").concat(this.props.informacion.id)}),r.a.createElement("h3",null,this.props.informacion.name))}}]),t}(n.Component),O=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"list-container",id:"nearby"},r.a.createElement("ul",{className:"list-cities"},Object.keys(this.props.cities).map(function(t){return r.a.createElement(g,{informacion:e.props.cities[t],key:t})}))))}}]),t}(n.Component),j=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).hide=function(){a.props.hideSearch&&a.props.hideSearch()},a.showResult=function(){if(a.props.result.length>0)return r.a.createElement("div",{className:"autocomplete"},r.a.createElement("ul",null,Object.keys(a.props.result).map(function(e){return r.a.createElement("li",{key:e},r.a.createElement(C.a,{to:"/city/".concat(a.props.result[e].country_id,"/").concat(a.props.result[e].id),className:"autocomplete-link",onClick:a.hide},a.props.result[e].name,r.a.createElement("span",null,a.props.result[e].country_id)))})))},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.showResult())}}]),t}(n.Component),k=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).terminoRef=r.a.createRef(),a.searchCity=function(){var e=a.terminoRef.current.value;a.props.searchCity(e)},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"search-container"},r.a.createElement("input",{onChange:this.searchCity,ref:this.terminoRef,type:"text",className:"search",placeholder:"e.g. Barcelona"}),r.a.createElement(j,{result:this.props.autoComplete,hideSearch:this.props.hideSearch}))}}]),t}(n.Component),w=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).showResult=function(){return 0===a.props.cities.length?r.a.createElement("div",{className:"spinner-container"},r.a.createElement("div",{className:"spinner"},r.a.createElement("div",{className:"double-bounce1"}),r.a.createElement("div",{className:"double-bounce2"}))):r.a.createElement("section",null,r.a.createElement("div",{className:"home"},r.a.createElement("div",{className:"wrapper"},r.a.createElement("h1",{className:"home-logo"},"CIT",r.a.createElement("span",null,"INFO")),r.a.createElement(k,{searchCity:a.props.searchCity,autoComplete:a.props.autoComplete}))),r.a.createElement("div",{className:"wrapper"},r.a.createElement("h2",null,"POPULAR"),r.a.createElement(O,{cities:a.props.cities})))},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.showResult())}}]),t}(n.Component),S=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).showSearch=function(){document.querySelector(".search-mobile-container").classList.add("flex"),document.querySelector(".search-btn").classList.add("hide"),document.querySelector(".close-btn").classList.add("show")},a.hideSearch=function(){document.querySelector(".search-mobile-container").classList.remove("flex"),document.querySelector(".search-btn").classList.remove("hide"),document.querySelector(".close-btn").classList.remove("show")},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",null,r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"header-container"},r.a.createElement("h1",{className:"header-logo"},r.a.createElement(C.a,{to:"/"},"CIT",r.a.createElement("span",null,"INFO"))),r.a.createElement(k,{searchCity:this.props.searchCity,autoComplete:this.props.autoComplete}),r.a.createElement("div",{className:"search-mobile-trigger"},r.a.createElement("svg",{onClick:this.showSearch,className:"search-btn",width:"50px",height:"50px",viewBox:"0 0 50 100",version:"1.1",xmlns:"..."},r.a.createElement("path",{d:"M55.1,51.9L41.6,37.8C45.1,33.6,47,28.4,47,23C47,10.3,36.7,0,24,0S1,10.3,1,23s10.3,23,23,23 c4.8,0,9.3-1.4,13.2-4.2L50.8,56c0.6,0.6,1.3,0.9,2.2,0.9c0.8,0,1.5-0.3,2.1-0.8C56.3,55,56.3,53.1,55.1,51.9z M24,6 c9.4,0,17,7.6,17,17s-7.6,17-17,17S7,32.4,7,23S14.6,6,24,6z"})))))),r.a.createElement("div",{className:"search-mobile-container"},r.a.createElement("div",{className:"closebtn-container"},r.a.createElement("svg",{onClick:this.hideSearch,className:"close-btn",width:"50px",height:"50px",viewBox:"0 0 50 100",version:"1.1",xmlns:"..."},r.a.createElement("path",{d:"M28.228,23.986L47.092,5.122c1.172-1.171,1.172-3.071,0-4.242c-1.172-1.172-3.07-1.172-4.242,0L23.986,19.744L5.121,0.88 c-1.172-1.172-3.07-1.172-4.242,0c-1.172,1.171-1.172,3.071,0,4.242l18.865,18.864L0.879,42.85c-1.172,1.171-1.172,3.071,0,4.242 C1.465,47.677,2.233,47.97,3,47.97s1.535-0.293,2.121-0.879l18.865-18.864L42.85,47.091c0.586,0.586,1.354,0.879,2.121,0.879 s1.535-0.293,2.121-0.879c1.172-1.171,1.172-3.071,0-4.242L28.228,23.986z"}))),r.a.createElement("div",{className:"search-mobile"},r.a.createElement(k,{searchCity:this.props.searchCity,autoComplete:this.props.autoComplete,hideSearch:this.hideSearch}))))}}]),t}(n.Component),N=a(15),I=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(N.Link,{activeClass:"active",to:"seeAndDo",spy:!0,smooth:!0,offset:-70,duration:500},"Places to see")),r.a.createElement("li",null,r.a.createElement(N.Link,{activeClass:"active",to:"activities",spy:!0,smooth:!0,offset:-70,duration:500},"Activities")),r.a.createElement("li",null,r.a.createElement(N.Link,{activeClass:"active",to:"map",spy:!0,smooth:!0,offset:-70,duration:500},"Map")),r.a.createElement("li",null,r.a.createElement(N.Link,{activeClass:"active",to:"weather",spy:!0,smooth:!0,offset:-70,duration:500},"Weather")),r.a.createElement("li",null,r.a.createElement(N.Link,{activeClass:"active",to:"nearby",spy:!0,smooth:!0,offset:-70,duration:500},"Nearby cities"))))}}]),t}(n.Component),T=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).fixCountryId=function(e){var t=e.split("_"),a="";return t.forEach(function(e){a+=e+" "}),a},a.showImage=function(){return a.props.info.images[0]?r.a.createElement("img",{className:"city-photo",src:a.props.info.images[0].sizes.original.url,alt:a.props.info.images[0].caption}):r.a.createElement("img",{className:"city-photo",src:"/assets/no-image.png",alt:"not found"})},a.showContent=function(){if(void 0!==a.props.info.content&&void 0!==a.props.info.content.title)return r.a.createElement("section",null,r.a.createElement("h2",{className:"city-name"},a.props.info.name),r.a.createElement("h3",{className:"country"},a.fixCountryId(a.props.info.country_id)),a.showImage(),r.a.createElement("p",null,a.props.info.intro))},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.showContent())}}]),t}(n.Component),A=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).divStyle=function(e){return a.props.pointsOfInterest[e].images[0]?{backgroundImage:"url("+a.props.pointsOfInterest[e].images[0].sizes.medium.url+")"}:{background:"#CCC"}},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("section",{id:"seeAndDo"},r.a.createElement("h2",null,"PLACES TO SEE"),r.a.createElement("ul",{className:"pointsOfInterest"},Object.keys(this.props.pointsOfInterest).map(function(t){return r.a.createElement("li",{key:t},r.a.createElement("div",{style:e.divStyle(t)}),r.a.createElement("h3",null,e.props.pointsOfInterest[t].name))})))}}]),t}(n.Component),x=a(42),_=Object(x.a)({accessToken:"pk.eyJ1IjoibWF0ZW9ibGFuY28iLCJhIjoiY2pza2p6MjJrMWp1dDQ0bjVkNGt6aTF0MiJ9.8Az9Ni7-thh-V1rNCRZIAw"}),L=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.coordinates,t=e.latitude,a=e.longitude;return r.a.createElement("section",{id:"map"},r.a.createElement("h2",null,"MAP"),r.a.createElement("div",{className:"map-container"},r.a.createElement(_,{style:"mapbox://styles/mapbox/streets-v9",center:[a,t],zoom:[13],containerStyle:{height:"400px",width:"100%"}})))}}]),t}(n.Component),R=function(){return r.a.createElement("footer",null)},V=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).showResult=function(){if(void 0!==a.props.activities)return r.a.createElement("ul",{className:"activities"},Object.keys(a.props.activities).map(function(e){return r.a.createElement("li",{key:e},r.a.createElement("h4",null,a.props.activities[e].name),r.a.createElement("p",null,a.props.activities[e].snippet))}))},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("section",{id:"activities"},r.a.createElement("h2",null,"ACTIVITIES"),this.showResult())}}]),t}(n.Component),F=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).convertDate=function(e){var t,a=e.split("-");switch(a[1]){case"01":t="JAN";break;case"02":t="FEB";break;case"03":t="MAR";break;case"04":t="APR";break;case"05":t="MAY";break;case"06":t="JUN";break;case"07":t="JUL";break;case"08":t="AUG";break;case"09":t="SEP";break;case"10":t="OCT";break;case"11":t="NOV";break;case"12":t="DEC";break;default:t="-"}return"".concat(a[2]," ").concat(t)},a.showResult=function(){if(void 0!==a.props.weather)return r.a.createElement("div",{className:"weather-container"},r.a.createElement("ul",{className:"weather"},Object.keys(a.props.weather).map(function(e){return r.a.createElement("li",{key:e},r.a.createElement("p",{className:"date"},a.convertDate(a.props.weather[e].date)),r.a.createElement("img",{src:a.props.weather[e].day.condition.icon,alt:"weather-icon"}),r.a.createElement("p",{className:"celsius"},a.props.weather[e].day.avgtemp_c.toFixed(0)," \u2103"))})))},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("section",{id:"weather"},r.a.createElement("h2",null,"WEATHER"),this.showResult())}}]),t}(n.Component),U=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).apiToken="rhzulxn6ub7dvaeaa247hy8986km4y3m",a.url="https://www.triposo.com/api/20181213/",a.autentication="account=IDGSSQVVIU&token=".concat(a.apiToken),a.state={info:[],pointsOfInterest:[],activities:[],nearbyCities:[],weather:[],stateChanges:0},a.getData=function(e,t){a.getCity(e),a.getActivities(e),a.getPointsOfInterest(e),a.getNearbyCities(e,t)},a.getCity=function(){var e=Object(f.a)(h.a.mark(function e(t){var n,r;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(a.url,"location.json?id=").concat(t,"&fields=all"),r={"X-Triposo-Account":"GSSQVVIU","X-Triposo-Token":a.apiToken},e.next=4,E.a.get(n,{headers:r}).then(function(e){a.setState({info:e.data.results[0],stateChanges:a.state.stateChanges+1}),a.getWeather(e.data.results[0].coordinates.latitude,e.data.results[0].coordinates.longitude)}).catch(function(e){console.log(e)});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.getPointsOfInterest=function(){var e=Object(f.a)(h.a.mark(function e(t){var n,r;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(a.url,"poi.json?location_id=").concat(t,"&fields=images,name,score,snippet&count=12&order_by=-score"),r={"X-Triposo-Account":"GSSQVVIU","X-Triposo-Token":a.apiToken},e.next=4,E.a.get(n,{headers:r}).then(function(e){a.setState({pointsOfInterest:e.data.results,stateChanges:a.state.stateChanges+1})}).catch(function(e){console.log(e)});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.getActivities=function(){var e=Object(f.a)(h.a.mark(function e(t){var n,r;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(a.url,"poi.json?location_id=").concat(t,"&tag_labels=do&count=10&fields=score,name,snippet&order_by=-score"),r={"X-Triposo-Account":"GSSQVVIU","X-Triposo-Token":a.apiToken},e.next=4,E.a.get(n,{headers:r}).then(function(e){a.setState({activities:e.data.results,stateChanges:a.state.stateChanges+1})}).catch(function(e){console.log(e)});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.getNearbyCities=function(){var e=Object(f.a)(h.a.mark(function e(t,n){var r,c;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(a.url,"location.json?part_of=").concat(n,"&also_visited=").concat(t,"&fields=id,name,images,country_id,score&order_by=-also_visited_score"),c={"X-Triposo-Account":"GSSQVVIU","X-Triposo-Token":a.apiToken},e.next=4,E.a.get(r,{headers:c}).then(function(e){a.setState({nearbyCities:e.data.results,stateChanges:a.state.stateChanges+1})}).catch(function(e){console.log(e)});case 4:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.getWeather=function(){var e=Object(f.a)(h.a.mark(function e(t,n){var r,c;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r="https://api.apixu.com/v1/forecast.json?key=4ca2025811c44d7cb11194042192502&q=".concat(t,",").concat(n,"&days=7"),c={Accept:"*/*","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},e.next=4,E.a.get(r,{headers:c}).then(function(e){a.setState({weather:e.data.forecast,stateChanges:a.state.stateChanges+1}),console.log(e.data.forecast)}).catch(function(e){console.log(e)});case 4:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.showResult=function(){return 5!==a.state.stateChanges?r.a.createElement("div",{className:"spinner-container"},r.a.createElement("div",{className:"spinner"},r.a.createElement("div",{className:"double-bounce1"}),r.a.createElement("div",{className:"double-bounce2"}))):void 0!==a.state.activities&&void 0!==a.state.nearbyCities&&void 0!==a.state.pointsOfInterest&&void 0!==a.state.info?r.a.createElement(r.a.Fragment,null,r.a.createElement(S,{searchCity:a.props.searchCity,autoComplete:a.props.autoComplete}),r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"city-container"},r.a.createElement("div",{className:"nav-container"},r.a.createElement(I,null)),r.a.createElement("div",null,r.a.createElement(T,{info:a.state.info}),r.a.createElement(A,{pointsOfInterest:a.state.pointsOfInterest}),r.a.createElement(V,{activities:a.state.activities}),r.a.createElement(L,{coordinates:a.state.info.coordinates}),r.a.createElement(F,{weather:a.state.weather.forecastday}),r.a.createElement("h2",null,"NEARBY CITIES"),r.a.createElement(O,{cities:a.state.nearbyCities})))),r.a.createElement(R,null)):void 0},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.emptyAutoComplete(),this.getData(this.props.id,this.props.country_id)}},{key:"shouldComponentUpdate",value:function(e){return this.props.location.pathname===e.location.pathname||(console.log(this.props.location.pathname),console.log(e.location.pathname),this.setState({info:[],pointsOfInterest:[],activities:[],nearbyCities:[],stateChanges:0}),this.props.emptyAutoComplete(),N.animateScroll.scrollToTop(),this.getData(e.id,e.country_id),!0)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.showResult())}}]),t}(n.Component),D=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).apiToken="rhzulxn6ub7dvaeaa247hy8986km4y3m",a.url="https://www.triposo.com/api/20181213/",a.autentication="account=IDGSSQVVIU&token=".concat(a.apiToken),a.state={searchCities:[],popularCities:[]},a.getPopularCities=Object(f.a)(h.a.mark(function e(){var t,n;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(a.url,"location.json?&part_of=!Egypt&tag_labels=city&count=10&fields=id,name,images,score,country_id&order_by=-score"),n={"X-Triposo-Account":"GSSQVVIU","X-Triposo-Token":a.apiToken},e.next=4,E.a.get(t,{headers:n}).then(function(e){a.setState({popularCities:e.data.results})}).catch(function(e){console.log(e)});case 4:case"end":return e.stop()}},e)})),a.searchCity=function(){var e=Object(f.a)(h.a.mark(function e(t){var n,r;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(a.url,"location.json?tag_labels=city&annotate=trigram:").concat(t,"&trigram=>=0.4&count=3&fields=id,name,score,country_id&order_by=-trigram"),r={"X-Triposo-Account":"GSSQVVIU","X-Triposo-Token":a.apiToken},0===t.length&&a.setState({searchCities:[]}),e.next=5,E.a.get(n,{headers:r}).then(function(e){a.setState({searchCities:e.data.results})}).catch(function(e){console.log(e)});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.emptyAutoComplete=function(){a.setState({searchCities:[]})},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getPopularCities()}},{key:"render",value:function(){var e=this;return r.a.createElement(d.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,null,r.a.createElement(v.a,{exact:!0,path:"/",render:function(){return r.a.createElement(w,{cities:e.state.popularCities,searchCity:e.searchCity,autoComplete:e.state.searchCities})}}),r.a.createElement(v.a,{exact:!0,path:"/city/:countryId/:cityId",render:function(t){var a=t.location.pathname.split("/");return r.a.createElement(U,{id:a[3],country_id:a[2],location:t.location,searchCity:e.searchCity,autoComplete:e.state.searchCities,emptyAutoComplete:e.emptyAutoComplete})}}),r.a.createElement(v.a,{render:function(){return r.a.createElement("h2",null,"404 Error")}}))))}}]),t}(n.Component),M=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(D,null)}}]),t}(n.Component);o.a.render(r.a.createElement(M,null),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.544ac6b3.chunk.js.map
